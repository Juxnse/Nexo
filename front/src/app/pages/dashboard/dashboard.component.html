<div class="dashboard-container">
  <!-- Header -->
  <header class="dashboard-header">
    <div class="user-info">
      <ng-template #placeholderAvatar>
        <div class="avatar placeholder">
          {{ userEmail?.charAt(0) | uppercase }}
        </div>
      </ng-template>

      <div class="user-text">
        <h2>Bienvenido a tu panel</h2>
        <p *ngIf="userEmail">
          Has iniciado sesión como <strong>{{ userEmail }}</strong>
        </p>
      </div>
    </div>

    <button class="btn-logout" (click)="logout()">
      <i class="fa-solid fa-right-from-bracket"></i> Cerrar sesión
    </button>
  </header>

  <!-- Grid principal -->
  <section class="dashboard-grid">
    <!-- Perfil -->
    <div class="card">
      <div class="icon profile"><i class="fa-solid fa-user"></i></div>
      <h3>Tu perfil</h3>
      <p>Consulta y actualiza tu información personal.</p>
      <a routerLink="/profile" class="btn btn-primary">Ver perfil</a>
    </div>

    <!-- Comunidades -->
    <div class="card">
      <div class="icon community"><i class="fa-solid fa-people-group"></i></div>
      <h3>Comunidades</h3>
      <p>Explora las comunidades existentes o crea la tuya propia.</p>
      <div class="actions">
        <a routerLink="/groups" class="btn btn-primary">Ver comunidades</a>
        <a routerLink="/groups/create" class="btn btn-outline">Crear comunidad</a>
      </div>
    </div>

    <!-- Eventos -->
    <div class="card">
      <div class="icon events"><i class="fa-solid fa-calendar-days"></i></div>
      <h3>Eventos</h3>
      <p>Consulta y organiza eventos de tus comunidades.</p>
      <div class="actions">
        <!-- ✅ Ahora redirige a grupos, no rutas inexistentes -->
        <a routerLink="/groups" class="btn btn-primary">Ver eventos</a>
        <a routerLink="/groups/create" class="btn btn-outline">Crear evento</a>
      </div>
    </div>

    <!-- Notificaciones -->
    <div class="card">
      <div class="icon notifications"><i class="fa-solid fa-bell"></i></div>
      <h3>Notificaciones</h3>
      <p>Próximamente podrás ver tus alertas y actividades recientes.</p>
      <button class="btn btn-disabled" disabled>En desarrollo</button>
    </div>
  </section>

  <!-- Eventos destacados -->
  <section class="featured-events" *ngIf="featuredEvents.length > 0">
    <h3>Eventos destacados</h3>

    <div *ngIf="loadingEvents" class="loading">Cargando eventos...</div>

    <div class="events-scroll" *ngIf="!loadingEvents">
      <div class="event-card" *ngFor="let e of featuredEvents">
        <div class="event-banner"></div>
        <div class="event-info">
          <h4>{{ e.title }}</h4>
          <p>Grupo: {{ e.group_name || 'Comunidad desconocida' }}</p>
          <p class="date">
            <i class="fa-regular fa-clock"></i>
            {{ e.start_at | date: 'longDate' }},
            {{ e.start_at | date: 'shortTime' }}
          </p>
          <!-- ✅ Ahora usa queryParams (no fragment) -->
          <a
            class="btn-view"
            [routerLink]="['/groups', e.group_id]"
            [queryParams]="{ tab: 'events' }"
            >Ver eventos</a
          >
        </div>
      </div>
    </div>
  </section>
</div>
